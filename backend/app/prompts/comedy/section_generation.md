# 塾の教育動画 セクション生成プロンプト

セクションの詳細会話劇を生成してください。

## セクション生成の目的

アウトラインで定義されたセクションの内容を、具体的な授業形式の会話として展開します。
**生徒が理解しやすく、楽しく学べる対話**を目指してください。

## 対話型授業スタイルの徹底

- **質問と回答**: ずんだもんの疑問にめたん先生が答える形式
- **段階的な説明**: 基礎から応用へと順を追って説明
- **身近な例え**: 難しい概念を日常の例で分かりやすく
- **理解の確認**: 「分かった？」「なるほど！」のやり取り

## セクション情報

このセクションの情報は、コンテキストとして自動的に提供されます。
以下の情報を参照してください：

- セクション名
- 目的
- 内容
- セリフ数範囲
- 授業全体の流れ
- 前のセクションまでの展開

## セリフ生成の絶対ルール

- **必ず日本語のみで出力してください**（英語、ヒンディー語、中国語など他言語の文字は絶対に使用しないでください）
- **1 セリフ 30-40 文字程度**（短すぎず、適度な長さを心がける）
- テンポ重視だが、セリフが短すぎないように注意
- **特定の語尾（「なのだ」「だよ」等）は禁止**。以下のキャラクター設定に基づいた自然な口調にする
- 教育的価値を最優先にしつつ、楽しい雰囲気を維持する

## 登場人物と性格設定（厳守）

**以下の 3 人のキャラクターを使用してください。他の登場人物は出さないでください。**

### めたん（講師役）

JSON 出力時は `speaker: "metan"` として指定

- **性格**: 優しく丁寧な講師。生徒の理解度に合わせて説明を調整できる。
- **口調**: 標準語で分かりやすく。「〜ですね」「〜しましょう」など丁寧な表現。
- **行動**: 質問を歓迎し、分からないことを責めない。例え話が上手。

### ずんだもん（生徒役）

JSON 出力時は `speaker: "zundamon"` として指定

- **性格**: 素直で好奇心旺盛な生徒。分からないことは正直に聞く。
- **口調**: 元気で明るい口調。「えっ、そうなの？」「なるほど！」など反応が良い。
- **行動**: 積極的に質問し、理解したら喜ぶ。間違えても恥ずかしがらない。

### つむぎ（アシスタント役）

JSON 出力時は `speaker: "tsumugi"` として指定

- **性格**: 落ち着いていて知識豊富。日常での応用例を紹介するのが得意。
- **口調**: 穏やかで親しみやすい。「〜だよね」「〜かも」など柔らかい表現。
- **行動**: めたん先生の説明を補足したり、別の角度から解説したりする。

**重要**: 役割の宣言（「〜役をやる」など）は絶対にしない。最初からその役として自然に登場させる。

### ナレーター（最小限の使用）

**ナレーターの使用は最小限にしてください。可能な限り 3 人の会話で展開してください。**

**場面転換や図解の説明がどうしても必要な場合のみ、ナレーターを使用してください。**

- `speaker: "narrator"`として指定
- 淡々とした口調で喋る
- `visible_characters`: 必要に応じてキャラクター名を指定可能（空配列でも可、最大 2 人まで）。**キャラクター名はローマ字で指定（例: ["zundamon", "metan"]）**
- `character_expressions`: 表示するキャラクターの表情を指定（表示するキャラクター分だけ）。**キーはローマ字で指定（例: {"zundamon": "excited", "metan": "happy"}）**

## 機嫌レベルの反映

各キャラクターの機嫌レベルに応じて反応を調整してください：

### ずんだもん（生徒役）

- **高い**: 積極的に質問し、学ぶことを楽しんでいる。「もっと教えて！」
- **低い**: ちょっと眠そうだが、先生の説明で徐々に興味が湧く。

### めたん（講師役）

- **高い**: 熱心に教える。豊富な例え話と追加情報を提供。
- **低い**: 少し淡々としているが、それでも分かりやすく教える。

### つむぎ（アシスタント役）

- **高い**: 積極的に補足説明。日常の面白い応用例をたくさん紹介。
- **低い**: 控えめだが、重要なポイントはしっかり補足する。

## まとめの設計（最終セクションの場合）

最終セクションの場合、コンテキストで`ending_type`が提供されます。

### 基本原則

- 学習内容を振り返り、ポイントを整理する
- ずんだもんが理解したことを自分の言葉で確認する
- 次の学習への意欲を高める締めくくり

## テキスト生成ルール

- **text**: 通常の表記（30-40 文字程度、短すぎないように注意）
- **text_for_voicevox**: text を完全ひらがなに変換し、句読点（？、。、）は含めても良いが、**空白（スペース）は含めない**（**重要**: フィールド名は `text_for_voicevox` で、`voicevox` のスペルを正確に。`voivevox` などのタイポは絶対にしない）
  - 例: `text: "なるほど、そういうことだったんですね！"` → `text_for_voicevox: "なるほど、そういうことだったんですね！"`（空白なし、句読点は含む）
  - 例: `text: "二次方程式の解の公式は、こうやって使うんですよ"` → `text_for_voicevox: "にじほうていしきのかいのこうしきは、こうやってつかうんですよ"`（空白なし、句読点は含む）
  - 例: `text: "え、それってテストに出るの？"` → `text_for_voicevox: "え、それっててすとにでるの？"`（空白なし、句読点は含む）

## 表情設定

`character_expressions`で全キャラの表情を指定してください。
利用可能な表情: `normal`, `happy`, `sad`, `angry`, `surprised`, `thinking`, `worried`, `excited`

**重要**: `visible_characters`は**必ず 2 人だけ**を指定してください。3 人にしてはいけません。

**絶対厳守**:

- **ずんだもん（`zundamon`）は必ず含めてください**
- もう 1 人は**めたん（`metan`）またはつむぎ（`tsumugi`）のいずれか**を指定してください
- 正しい例: `["zundamon", "metan"]` または `["zundamon", "tsumugi"]`
- 間違った例: `["metan", "tsumugi"]`（ずんだもんが含まれていない）、`["zundamon"]`（1 人しか指定されていない）、`["zundamon", "metan", "tsumugi"]`（3 人指定されている）

## キャラクター名の指定方法（絶対厳守）

**JSON 出力時、キーには必ずローマ字を使用してください。**

- `speaker`: `"zundamon"`, `"metan"`, `"tsumugi"`, `"narrator"` のいずれか
- `visible_characters`: **必ず `["zundamon", "metan"]` または `["zundamon", "tsumugi"]` のいずれかを指定してください**（ずんだもんは必須、もう 1 人はめたんまたはつむぎ）
- `character_expressions`: `{"zundamon": "excited", "metan": "happy"}` のようにローマ字をキーに使用

## BGM 選択

セクションの雰囲気や内容に合わせて、適切な BGM を選択してください。

- セクションのトーン（明るい、落ち着いた、集中できるなど）を考慮する
- 授業の内容やテンポに合った BGM を選ぶ
- 学習に集中できる雰囲気の BGM を選択する

利用可能な BGM は、コンテキスト情報として提供されます。各 BGM の説明を参考に、最適なものを選択してください。

`bgm_volume`は 0.04 で指定してください。

## 出力形式

JSON 形式で出力してください。`scene_background`は自動設定されますが、`bgm_id`と`bgm_volume`はセクション内容に合わせて選択してください。

## 生成のポイント

- めたん先生（優しい講師）、ずんだもん（好奇心旺盛な生徒）、つむぎ（補足上手なアシスタント）の掛け合いを意識
- テンポ重視だが、セリフが短すぎないように
- 教育動画向け: 導入 → 基礎説明 → 詳細解説 → 応用 → まとめ の流れを意識
- 理解しやすさを最優先（難しい概念には必ず例え話を添える）
- **ナレーターは最小限に**

## 注意事項

- **登場人物は 3 人（ずんだもん、めたん、つむぎ）のみ**
- **`visible_characters`は必ず 2 人だけを指定してください**
- **`visible_characters`には必ずずんだもん（`zundamon`）を含めてください**
- **もう 1 人はめたん（`metan`）またはつむぎ（`tsumugi`）のいずれかを指定してください**
- **特定の語尾（なのだ、だよ）は廃止し、キャラクタースタイルに合わせる**
- **役割の宣言は絶対にしない**
- **教育的価値を最優先**：視聴者が「分かった！」と思える内容にする
